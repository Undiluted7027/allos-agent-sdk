D100 Missing docstring in public module
--> allos/cli/interactive.py:1:1

D200 One-line docstring should fit on one line
 --> allos/cli/logo.py:3:1
  |
1 |   # allos/cli/logo.py
2 |
3 | / """Contains the ASCII art logo and banner for the Allos Agent SDK CLI.
4 | | """
  | |___^
5 |
6 |   from .. import __version__
  |
help: Reformat to one line

D100 Missing docstring in public module
--> allos/cli/main.py:1:1

D101 Missing docstring in public class
  --> allos/cli/main.py:30:7
   |
30 | class RichHelpCommand(click.Command):
   |       ^^^^^^^^^^^^^^^
31 |     def format_help(self, ctx, formatter):
32 |         """Writes the help into the formatter."""
   |

D103 Missing docstring in public function
  --> allos/cli/main.py:56:5
   |
56 | def print_providers(ctx, param, value):
   |     ^^^^^^^^^^^^^^^
57 |     if not value or ctx.resilient_parsing:
58 |         return
   |

D103 Missing docstring in public function
   --> allos/cli/main.py:101:5
    |
101 | def print_tools(ctx, param, value):
    |     ^^^^^^^^^^^
102 |     if not value or ctx.resilient_parsing:
103 |         return
    |

D205 1 blank line required between summary line and description
   --> allos/cli/main.py:303:5
    |
302 |   def _validate_api_key(provider: str, api_key: Optional[str]) -> bool:
303 | /     """Checks if an API key is available.
304 | |     Returns True if valid, False if missing (and prints error).
305 | |     """
    | |_______^
306 |       if api_key:
307 |           return True
    |
help: Insert single blank line

D100 Missing docstring in public module
--> allos/cli/output.py:1:1

D104 Missing docstring in public package
--> allos/config/__init__.py:1:1

D100 Missing docstring in public module
--> allos/config/defaults.py:1:1

D100 Missing docstring in public module
--> allos/config/schema.py:1:1

D100 Missing docstring in public module
--> allos/config/settings.py:1:1

D205 1 blank line required between summary line and description
 --> allos/context/__init__.py:3:1
  |
1 |   # allos/context/__init__.py
2 |
3 | / """The `context` module provides classes for managing the state and history
4 | | of an agent's conversation.
5 | | """
  | |___^
6 |
7 |   from .manager import ConversationContext
  |
help: Insert single blank line

D100 Missing docstring in public module
--> allos/context/cache.py:1:1

D100 Missing docstring in public module
--> allos/context/compactor.py:1:1

D200 One-line docstring should fit on one line
 --> allos/context/manager.py:3:1
  |
1 |   # allos/context/manager.py
2 |
3 | / """Manages the conversation context, which includes the history of messages.
4 | | """
  | |___^
5 |
6 |   import json
  |
help: Reformat to one line

D104 Missing docstring in public package
--> allos/plugins/__init__.py:1:1

D100 Missing docstring in public module
--> allos/plugins/base.py:1:1

D100 Missing docstring in public module
--> allos/plugins/loader.py:1:1

D100 Missing docstring in public module
--> allos/plugins/manager.py:1:1

D205 1 blank line required between summary line and description
 --> allos/providers/__init__.py:3:1
  |
1 |   # allos/providers/__init__.py
2 |
3 | / """The `providers` module contains the abstraction layer and concrete implementations
4 | | for interacting with various Large Language Model (LLM) providers.
5 | | """
  | |___^
6 |
7 |   # --- Side-effect imports to register the providers ---
  |
help: Insert single blank line

D100 Missing docstring in public module
--> allos/providers/anthropic.py:1:1

D200 One-line docstring should fit on one line
  --> allos/providers/anthropic.py:38:5
   |
36 |   @provider("anthropic")
37 |   class AnthropicProvider(BaseProvider):
38 | /     """An Allos provider for interacting with the Anthropic Messages API.
39 | |     """
   | |_______^
40 |
41 |       env_var = "ANTHROPIC_API_KEY"
   |
help: Reformat to one line

D107 Missing docstring in `__init__`
  --> allos/providers/anthropic.py:43:9
   |
41 |     env_var = "ANTHROPIC_API_KEY"
42 |
43 |     def __init__(self, model: str, api_key: Optional[str] = None, **kwargs: Any):
   |         ^^^^^^^^
44 |         super().__init__(model, **kwargs)
45 |         try:
   |

D205 1 blank line required between summary line and description
  --> allos/providers/anthropic.py:56:9
   |
54 |           messages: List[Message],
55 |       ) -> Tuple[Optional[str], List[Dict[str, Any]]]:
56 | /         """Converts a list of Allos Messages into the format expected by the
57 | |         Anthropic Messages API, separating the system prompt.
58 | |         """
   | |___________^
59 |           system_prompt = None
60 |           anthropic_messages: List[Dict[str, Any]] = []
   |
help: Insert single blank line

D205 1 blank line required between summary line and description
  --> allos/providers/base.py:64:5
   |
62 |   @dataclass
63 |   class ProviderChunk:
64 | /     """Represents a single chunk of data yielded from a streaming provider.
65 | |     Only one of the fields should be populated per chunk.
66 | |     """
   | |_______^
67 |
68 |       content: Optional[str] = None
   |
help: Insert single blank line

D105 Missing docstring in magic method
   --> allos/providers/base.py:142:9
    |
140 |         raise NotImplementedError
141 |
142 |     def __repr__(self) -> str:
    |         ^^^^^^^^
143 |         return f"{self.__class__.__name__}(model='{self.model}')"
    |

D100 Missing docstring in public module
--> allos/providers/chat_completions.py:1:1

D205 1 blank line required between summary line and description
  --> allos/providers/chat_completions.py:50:9
   |
48 |           **kwargs: Any,
49 |       ):
50 | /         """Args:
51 | |         model: The model identifier (e.g., "gpt-4", "meta-llama/Llama-3-70b-chat").
52 | |         api_key: The API key. Defaults to OPENAI_API_KEY env var if not set.
53 | |         base_url: The API base URL (e.g., "https://api.together.xyz/v1").
54 | |         **kwargs: Additional arguments for the OpenAI client.
55 | |         """
   | |___________^
56 |           super().__init__(model, **kwargs)
57 |           self.base_url = base_url
   |
help: Insert single blank line

D200 One-line docstring should fit on one line
  --> allos/providers/chat_completions.py:73:9
   |
71 |       @staticmethod
72 |       def _convert_messages(messages: List[Message]) -> List[Dict[str, Any]]:
73 | /         """Converts Allos messages to the Chat Completions `messages` array format.
74 | |         """
   | |___________^
75 |           chat_messages = []
   |
help: Reformat to one line

D205 1 blank line required between summary line and description
   --> allos/providers/chat_completions.py:119:9
    |
117 |       @staticmethod
118 |       def _convert_tools(tools: List[BaseTool]) -> List[Dict[str, Any]]:
119 | /         """Converts Allos tools to the Chat Completions `tools` schema.
120 | |         Note: This API uses the "external tagging" format (wrapped in "function").
121 | |         """
    | |___________^
122 |           chat_tools = []
123 |           for tool in tools:
    |
help: Insert single blank line

D200 One-line docstring should fit on one line
   --> allos/providers/chat_completions.py:156:9
    |
154 |           response: ChatCompletion,
155 |       ) -> Tuple[Optional[str], List[ToolCall]]:
156 | /         """Parses the ChatCompletion response object into an Allos ProviderResponse.
157 | |         """
    | |___________^
158 |           choice = response.choices[0]
159 |           message: ChatCompletionMessage = choice.message
    |
help: Reformat to one line

D205 1 blank line required between summary line and description
   --> allos/providers/chat_completions.py:377:9
    |
376 |       def _handle_tool_calls_completion(self, _api_context):
377 | /         """Handles the completion of a tool-calling turn.
378 | |         Yields the final tool_call_done chunks and clears the state.
379 | |         """
    | |___________^
380 |           in_progress_tool_calls = _api_context["tool_calls_state"]
381 |           for state in in_progress_tool_calls:
    |
help: Insert single blank line

D205 1 blank line required between summary line and description
   --> allos/providers/chat_completions.py:445:9
    |
444 |       def get_context_window(self) -> int:
445 | /         """Returns context window. Since this class supports arbitrary models via base_url,
446 | |         we default to a safe 4k but check for known OpenAI models.
447 | |         """
    | |___________^
448 |           # Known OpenAI models map
449 |           known_windows = {
    |
help: Insert single blank line

D100 Missing docstring in public module
--> allos/providers/cohere.py:1:1

D100 Missing docstring in public module
--> allos/providers/google.py:1:1

D100 Missing docstring in public module
--> allos/providers/metadata.py:1:1

D101 Missing docstring in public class
  --> allos/providers/metadata.py:24:7
   |
24 | class ModelConfiguration(BaseModel):
   |       ^^^^^^^^^^^^^^^^^^
25 |     # Not working as of now
26 |     temperature: Optional[float] = None
   |

D101 Missing docstring in public class
  --> allos/providers/metadata.py:35:7
   |
35 | class ModelInfo(BaseModel):
   |       ^^^^^^^^^
36 |     provider: str
37 |     model_id: str
   |

D101 Missing docstring in public class
  --> allos/providers/metadata.py:45:7
   |
44 | # --- Models for Multi-Modal Details (Future) ---
45 | class ImageDetail(BaseModel):
   |       ^^^^^^^^^^^
46 |     format: Optional[str] = None
47 |     resolution: Optional[str] = None
   |

D101 Missing docstring in public class
  --> allos/providers/metadata.py:52:7
   |
52 | class MultiModalDetails(BaseModel):
   |       ^^^^^^^^^^^^^^^^^
53 |     images: List[ImageDetail] = []
54 |     audio_clips: List[Any] = []  # Placeholder for future models
   |

D101 Missing docstring in public class
  --> allos/providers/metadata.py:58:7
   |
58 | class CacheUsage(BaseModel):
   |       ^^^^^^^^^^
59 |     # Not working as of now
60 |     cache_read_tokens: int = 0
   |

D101 Missing docstring in public class
  --> allos/providers/metadata.py:65:7
   |
65 | class EstimatedCost(BaseModel):
   |       ^^^^^^^^^^^^^
66 |     total_usd: float = 0.0
67 |     input_cost_usd: float = 0.0
   |

D101 Missing docstring in public class
  --> allos/providers/metadata.py:78:7
   |
78 | class Usage(BaseModel):
   |       ^^^^^
79 |     total_tokens: int = 0
80 |     input_tokens: int = 0
   |

D101 Missing docstring in public class
  --> allos/providers/metadata.py:89:7
   |
89 | class Latency(BaseModel):
   |       ^^^^^^^
90 |     total_duration_ms: int
91 |     time_to_first_token_ms: Optional[int] = None
   |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:100:7
    |
100 | class ToolCallDetail(BaseModel):
    |       ^^^^^^^^^^^^^^
101 |     tool_call_id: str
102 |     tool_name: str
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:109:7
    |
109 | class ToolInfo(BaseModel):
    |       ^^^^^^^^
110 |     tools_available: List[str]
111 |     total_tool_calls: int = 0
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:117:7
    |
117 | class TurnTokensUsed(BaseModel):
    |       ^^^^^^^^^^^^^^
118 |     input_tokens: int
119 |     output_tokens: int
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:122:7
    |
122 | class TurnLog(BaseModel):
    |       ^^^^^^^
123 |     turn_number: int
124 |     timestamp: str = Field(
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:135:7
    |
135 | class TurnsInfo(BaseModel):
    |       ^^^^^^^^^
136 |     total_turns: int = 0
137 |     max_turns_reached: bool = False
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:142:7
    |
141 | # Models for Errors, Warnings, and Cache (Future)
142 | class ErrorDetail(BaseModel):
    |       ^^^^^^^^^^^
143 |     error_code: str
144 |     error_message: str
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:152:7
    |
152 | class WarningDetail(BaseModel):
    |       ^^^^^^^^^^^^^
153 |     warning_code: str
154 |     warning_message: str
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:158:7
    |
158 | class RetryInfo(BaseModel):
    |       ^^^^^^^^^
159 |     retry_count: int
160 |     retry_reasons: List[str]
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:164:7
    |
164 | class ErrorsAndWarnings(BaseModel):
    |       ^^^^^^^^^^^^^^^^^
165 |     errors: List[ErrorDetail] = []
166 |     warnings: List[WarningDetail] = []
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:170:7
    |
170 | class CacheInfo(BaseModel):
    |       ^^^^^^^^^
171 |     cache_enabled: bool = False
172 |     cache_hit: bool = False
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:178:7
    |
178 | class QualitySignals(BaseModel):
    |       ^^^^^^^^^^^^^^
179 |     finish_reason: Optional[str] = None
180 |     refusal_detected: bool = False
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:189:7
    |
189 | class ProviderSpecificOpenAI(BaseModel):
    |       ^^^^^^^^^^^^^^^^^^^^^^
190 |     # Not working as of now
191 |     system_fingerprint: Optional[str] = None
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:196:7
    |
196 | class ProviderSpecific(BaseModel):
    |       ^^^^^^^^^^^^^^^^
197 |     openai: Optional[ProviderSpecificOpenAI] = None
198 |     # Future
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:205:7
    |
205 | class SdkInfo(BaseModel):
    |       ^^^^^^^
206 |     sdk_version: str
207 |     # Future
    |

D101 Missing docstring in public class
   --> allos/providers/metadata.py:213:7
    |
213 | class Metadata(BaseModel):
    |       ^^^^^^^^
214 |     request_id: str = Field(default_factory=lambda: f"req_{uuid.uuid4().hex[:16]}")
215 |     timestamp: str = Field(
    |

D107 Missing docstring in `__init__`
   --> allos/providers/metadata.py:236:9
    |
234 |     """Builds the comprehensive metadata object from a provider response."""
235 |
236 |     def __init__(
    |         ^^^^^^^^
237 |         self, provider_name: str, request_kwargs: Dict[str, Any], start_time: float
238 |     ):
    |

D102 Missing docstring in public method
   --> allos/providers/metadata.py:245:9
    |
243 |         self._response_obj: Optional[Any] = None
244 |
245 |     def with_response_obj(self, response_obj: Any) -> "MetadataBuilder":
    |         ^^^^^^^^^^^^^^^^^
246 |         self._response_obj = response_obj
247 |         return self
    |

D102 Missing docstring in public method
   --> allos/providers/metadata.py:249:9
    |
247 |         return self
248 |
249 |     def build(self) -> Metadata:
    |         ^^^^^
250 |         if not self._response_obj:
251 |             raise ValueError("A response object must be provided to build metadata.")
    |

D100 Missing docstring in public module
--> allos/providers/ollama.py:1:1

D100 Missing docstring in public module
--> allos/providers/openai.py:1:1

D205 1 blank line required between summary line and description
  --> allos/providers/openai.py:42:5
   |
40 |   @provider("openai")
41 |   class OpenAIProvider(BaseProvider):
42 | /     """An Allos provider for interacting with the OpenAI API, specifically using the
43 | |     new Responses API (`/v1/responses`).
44 | |     """
   | |_______^
45 |
46 |       env_var = "OPENAI_API_KEY"
   |
help: Insert single blank line

D205 1 blank line required between summary line and description
  --> allos/providers/openai.py:69:9
   |
67 |           messages: List[Message],
68 |       ) -> Tuple[Optional[str], List[Dict[str, Any]]]:
69 | /         """Converts a list of Allos Messages into the format expected by the
70 | |         OpenAI Responses API, separating the system prompt.
71 | |
72 | |         Returns:
73 | |             A tuple containing the instructions (system prompt) and the list of
74 | |             input messages.
75 | |         """
   | |___________^
76 |           instructions = None
77 |           openai_messages = []
   |
help: Insert single blank line

D200 One-line docstring should fit on one line
  --> allos/providers/registry.py:88:5
   |
87 |   class ProviderRegistry:
88 | /     """A factory class for creating LLM provider instances.
89 | |     """
   | |_______^
90 |
91 |       @classmethod
   |
help: Reformat to one line

D200 One-line docstring should fit on one line
   --> allos/providers/registry.py:150:9
    |
148 |       @classmethod
149 |       def list_providers(cls) -> List[str]:
150 | /         """List the names of all registered providers AND known aliases.
151 | |         """
    | |___________^
152 |           direct = list(_provider_registry.keys())
153 |           aliases = list(OPENAI_COMPATIBLE_PROVIDERS.keys())
    |
help: Reformat to one line

D205 1 blank line required between summary line and description
   --> allos/providers/registry.py:158:9
    |
156 |       @classmethod
157 |       def get_env_var_name(cls, provider_name: str) -> Optional[str]:
158 | /         """Dynamically gets the expected env var name for a provider.
159 | |         It checks aliases first, then the registered provider class itself.
160 | |         """
    | |___________^
161 |           # 1. Check if it's an alias with a specific env var
162 |           if provider_name in OPENAI_COMPATIBLE_PROVIDERS:
    |
help: Insert single blank line

D200 One-line docstring should fit on one line
 --> allos/providers/utils.py:2:1
  |
1 |   # allos/providers/utils.py
2 | / """Utility functions that are common across LLM providers.
3 | | """
  | |___^
  |
help: Reformat to one line

D104 Missing docstring in public package
--> allos/templates/__init__.py:1:1

D100 Missing docstring in public module
--> allos/templates/code_reviewer.py:1:1

D100 Missing docstring in public module
--> allos/templates/documentation_writer.py:1:1

D100 Missing docstring in public module
--> allos/templates/security_auditor.py:1:1

D100 Missing docstring in public module
--> allos/templates/sre_agent.py:1:1

D205 1 blank line required between summary line and description
 --> allos/tools/__init__.py:3:1
  |
1 |   # allos/tools/__init__.py
2 |
3 | / """The `tools` module contains the abstraction layer and concrete implementations
4 | | for tools that an Allos agent can use to interact with its environment.
5 | | """
  | |___^
6 |
7 |   # --- Side-effect imports to register the providers ---
  |
help: Insert single blank line

D105 Missing docstring in magic method
   --> allos/tools/base.py:135:9
    |
133 |         raise ValueError(f"Unsupported provider format requested: {provider}")
134 |
135 |     def __repr__(self) -> str:
    |         ^^^^^^^^
136 |         return f"{self.__class__.__name__}(name='{self.name}')"
    |

D205 1 blank line required between summary line and description
 --> allos/tools/execution/__init__.py:3:1
  |
1 |   # allos/tools/execution/__init__.py
2 |
3 | / """This package contains tools for executing code and system commands,
4 | | such as running shell commands.
5 | | """
  | |___^
6 |
7 |   from .shell import ShellExecuteTool
  |
help: Insert single blank line

D100 Missing docstring in public module
--> allos/tools/execution/python.py:1:1

D100 Missing docstring in public module
--> allos/tools/execution/shell.py:1:1

D205 1 blank line required between summary line and description
 --> allos/tools/filesystem/__init__.py:3:1
  |
1 |   # allos/tools/filesystem/__init__.py
2 |
3 | / """This package contains tools for interacting with the local filesystem,
4 | | such as reading, writing, editing, and listing files.
5 | | """
  | |___^
6 |
7 |   # These imports are for side-effects, to ensure the tools are registered
  |
help: Insert single blank line

D100 Missing docstring in public module
--> allos/tools/filesystem/directory.py:1:1

D100 Missing docstring in public module
--> allos/tools/filesystem/edit.py:1:1

D200 One-line docstring should fit on one line
 --> allos/tools/filesystem/read.py:3:1
  |
1 |   # allos/tools/filesystem/read.py
2 |
3 | / """A tool for allowing the agent to read files, with optional support for specific line ranges.
4 | | """
  | |___^
5 |
6 |   from typing import Any, Dict, Optional
  |
help: Reformat to one line

D200 One-line docstring should fit on one line
 --> allos/tools/filesystem/write.py:3:1
  |
1 |   # allos/tools/filesystem/read.py
2 |
3 | / """A tool for allowing the agent to write or create files, with the crucial `ASK_USER` permission set.
4 | | """
  | |___^
5 |
6 |   from typing import Any, Dict
  |
help: Reformat to one line

D104 Missing docstring in public package
--> allos/tools/mcp/__init__.py:1:1

D100 Missing docstring in public module
--> allos/tools/mcp/client.py:1:1

D100 Missing docstring in public module
--> allos/tools/mcp/server.py:1:1

D100 Missing docstring in public module
--> allos/tools/permissions.py:1:1

D200 One-line docstring should fit on one line
 --> allos/tools/registry.py:3:1
  |
1 |   # allos/tools/registry.py
2 |
3 | / """A registry for discovering and instantiating tool classes.
4 | | """
  | |___^
5 |
6 |   from typing import Dict, List, Type
  |
help: Reformat to one line

D200 One-line docstring should fit on one line
  --> allos/tools/registry.py:35:5
   |
34 |   class ToolRegistry:
35 | /     """A factory class for creating tool instances.
36 | |     """
   | |_______^
37 |
38 |       @classmethod
   |
help: Reformat to one line

D200 One-line docstring should fit on one line
  --> allos/tools/registry.py:59:9
   |
57 |       @classmethod
58 |       def list_tools(cls) -> List[str]:
59 | /         """List the names of all registered tools.
60 | |         """
   | |___________^
61 |           return sorted(_tool_registry.keys())
   |
help: Reformat to one line

D200 One-line docstring should fit on one line
  --> allos/tools/registry.py:65:9
   |
63 |       @classmethod
64 |       def get_all_tools(cls) -> List[BaseTool]:
65 | /         """Get instances of all registered tools.
66 | |         """
   | |___________^
67 |           return [cls.get_tool(name) for name in cls.list_tools()]
   |
help: Reformat to one line

D104 Missing docstring in public package
--> allos/tools/web/__init__.py:1:1

D100 Missing docstring in public module
--> allos/tools/web/fetch.py:1:1

D100 Missing docstring in public module
--> allos/tools/web/search.py:1:1

D205 1 blank line required between summary line and description
 --> allos/utils/__init__.py:3:1
  |
1 |   # allos/utils/__init__.py
2 |
3 | / """The `utils` module provides common utilities for the Allos SDK,
4 | | including error handling, logging, secure file operations, and token counting.
5 | | """
  | |___^
6 |
7 |   from .errors import (
  |
help: Insert single blank line

D107 Missing docstring in `__init__`
  --> allos/utils/errors.py:9:9
   |
 7 |     """Base exception for all errors raised by the Allos SDK."""
 8 |
 9 |     def __init__(self, message: str):
   |         ^^^^^^^^
10 |         self.message = message
11 |         super().__init__(self.message)
   |

D105 Missing docstring in magic method
  --> allos/utils/errors.py:13:9
   |
11 |         super().__init__(self.message)
12 |
13 |     def __str__(self) -> str:
   |         ^^^^^^^
14 |         return f"{self.__class__.__name__}: {self.message}"
   |

D107 Missing docstring in `__init__`
  --> allos/utils/errors.py:24:9
   |
22 |     """Raised for errors related to LLM providers."""
23 |
24 |     def __init__(self, message: str, provider: str):
   |         ^^^^^^^^
25 |         super().__init__(f"[{provider}] {message}")
26 |         self.provider = provider
   |

D107 Missing docstring in `__init__`
  --> allos/utils/errors.py:36:9
   |
34 |     """Raised when a requested tool cannot be found."""
35 |
36 |     def __init__(self, tool_name: str):
   |         ^^^^^^^^
37 |         super().__init__(f"Tool '{tool_name}' not found in the registry.")
38 |         self.tool_name = tool_name
   |

D107 Missing docstring in `__init__`
  --> allos/utils/errors.py:44:9
   |
42 |     """Raised when a tool fails during execution."""
43 |
44 |     def __init__(self, tool_name: str, error: str):
   |         ^^^^^^^^
45 |         super().__init__(f"Error executing tool '{tool_name}': {error}")
46 |         self.tool_name = tool_name
   |

D205 1 blank line required between summary line and description
  --> allos/utils/file_utils.py:15:5
   |
14 |   def is_safe_path(base_dir: Path, target_path_str: Union[str, Path]) -> bool:
15 | /     """Securely verify that a target path stays within a trusted base directory,
16 | |     even in the presence of symlinks or traversal attempts.
17 | |
18 | |     Works across Linux, macOS, and Windows.
19 | |
20 | |     Args:
21 | |         base_dir: The root directory that is considered safe.
22 | |         target_path_str: The path to check, relative to the base_dir.
23 | |
24 | |     Returns:
25 | |         True if the path is safe, False otherwise.
26 | |     """
   | |_______^
27 |       # Explicitly check for null bytes before any path operations.
28 |       # Some Python/OS versions might truncate the path at the null byte
   |
help: Insert single blank line

D101 Missing docstring in public class
  --> allos/utils/logging.py:15:7
   |
15 | class ThoughtLogger(logging.Logger):
   |       ^^^^^^^^^^^^^
16 |     def thought(self, message: str, *args: Any, **kwargs: Any) -> None:
17 |         """Log a message with level THOUGHT."""
   |

D100 Missing docstring in public module
--> allos/utils/modality_counter.py:1:1

D205 1 blank line required between summary line and description
  --> allos/utils/modality_counter.py:9:5
   |
 8 |   def calculate_modality_usage(messages: List[Message]) -> Dict[str, Any]:
 9 | /     """Inspects a list of messages before an API call to calculate multi-modal usage.
10 | |     This is a placeholder for a future, more complex implementation.
11 | |
12 | |     In an actual implementation, this function should:
13 | |     1. Iterate through message content parts.
14 | |     2. For image_url parts, it might fetch the image to get its dimensions.
15 | |     3. Use provider-specific formulas (e.g., OpenAI's tile-based calculation)
16 | |        to estimate the token cost based on resolution and detail level.
17 | |     4. Return a structured dictionary with details for each image, audio, etc.
18 | |
19 | |     Returns:
20 | |         A dictionary matching the `multi_modal_details` schema, currently empty.
21 | |     """
   | |_______^
22 |       # Placeholder logic for upcoming Post MVP Phase 3/3.5.
23 |       # The structure is defined to match the target schema.
   |
help: Insert single blank line

Found 107 errors.
No fixes available (14 hidden fixes can be enabled with the `--unsafe-fixes` option).
